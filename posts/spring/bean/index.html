<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="jparangdev">
<meta name="description" content="Spring의 콩(bean)에 대해 알아보자
  물론 이 콩이 아니다.
  그럼.. Bean이 뭔데? 간단히 말하면 스프링프레임워크에서 사용하는 자바의 객체를 Bean이라 할 수 있다. 다만 Spring IoC Container(컨테이너)에서 관리되기 때문에 자바객체와 다르게 Bean(빈)이라 말한다. Xml이나 어노테이션을 이용해 메타데이터를 설정하면 컨테이너는 이를 확인해서 빈을 생성하고 해당 빈의 라이프 사이클을 관리하며 필요한 부분에 주입하여 의존성을 관리한다.
  이 콩도 아니다 이 콩도 아니다
  그럼 왜 굳이 Bean을 사용하는가?" />
<meta name="keywords" content=", spring-framework, spring-boot, java" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="/posts/spring/bean/" />


    <title>
        
            콩(Bean) 이야기 :: Jparangdev&#39;s blog  — develop and record
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.d7bdd8ee18bfbf4c605488a7e5b1b92cd980dfeed2bdaeab4dd5e931a7a78bc0.css">






<meta itemprop="name" content="콩(Bean) 이야기">
<meta itemprop="description" content="Spring의 콩(bean)에 대해 알아보자
  물론 이 콩이 아니다.
  그럼.. Bean이 뭔데? 간단히 말하면 스프링프레임워크에서 사용하는 자바의 객체를 Bean이라 할 수 있다. 다만 Spring IoC Container(컨테이너)에서 관리되기 때문에 자바객체와 다르게 Bean(빈)이라 말한다. Xml이나 어노테이션을 이용해 메타데이터를 설정하면 컨테이너는 이를 확인해서 빈을 생성하고 해당 빈의 라이프 사이클을 관리하며 필요한 부분에 주입하여 의존성을 관리한다.
  이 콩도 아니다 이 콩도 아니다
  그럼 왜 굳이 Bean을 사용하는가?">
<meta itemprop="datePublished" content="2021-01-02T21:23:00+09:00" />
<meta itemprop="dateModified" content="2021-01-02T21:23:00+09:00" />
<meta itemprop="wordCount" content="901">
<meta itemprop="image" content=""/>



<meta itemprop="keywords" content="spring-framework,spring-boot,java," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content=""/>

<meta name="twitter:title" content="콩(Bean) 이야기"/>
<meta name="twitter:description" content="Spring의 콩(bean)에 대해 알아보자
  물론 이 콩이 아니다.
  그럼.. Bean이 뭔데? 간단히 말하면 스프링프레임워크에서 사용하는 자바의 객체를 Bean이라 할 수 있다. 다만 Spring IoC Container(컨테이너)에서 관리되기 때문에 자바객체와 다르게 Bean(빈)이라 말한다. Xml이나 어노테이션을 이용해 메타데이터를 설정하면 컨테이너는 이를 확인해서 빈을 생성하고 해당 빈의 라이프 사이클을 관리하며 필요한 부분에 주입하여 의존성을 관리한다.
  이 콩도 아니다 이 콩도 아니다
  그럼 왜 굳이 Bean을 사용하는가?"/>




    <meta property="og:title" content="콩(Bean) 이야기" />
<meta property="og:description" content="Spring의 콩(bean)에 대해 알아보자
  물론 이 콩이 아니다.
  그럼.. Bean이 뭔데? 간단히 말하면 스프링프레임워크에서 사용하는 자바의 객체를 Bean이라 할 수 있다. 다만 Spring IoC Container(컨테이너)에서 관리되기 때문에 자바객체와 다르게 Bean(빈)이라 말한다. Xml이나 어노테이션을 이용해 메타데이터를 설정하면 컨테이너는 이를 확인해서 빈을 생성하고 해당 빈의 라이프 사이클을 관리하며 필요한 부분에 주입하여 의존성을 관리한다.
  이 콩도 아니다 이 콩도 아니다
  그럼 왜 굳이 Bean을 사용하는가?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/spring/bean/" />
<meta property="og:image" content=""/>
<meta property="article:published_time" content="2021-01-02T21:23:00+09:00" />
<meta property="article:modified_time" content="2021-01-02T21:23:00+09:00" /><meta property="og:site_name" content="Jparangdev&#39;s blog" />




    <meta property="article:section" content="spring" />



    <meta property="article:published_time" content="2021-01-02 21:23:00 &#43;0900 KST" />








    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">Jparangdev </span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/posts">Posts</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        5 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="/posts/spring/bean/">콩(Bean) 이야기</a>
      </h1>

      

      

      <div class="post-content">
        <p>Spring의 콩(bean)에 대해 알아보자</p>
<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=10PKsiqX5O0rXqSFMLokk-W5TkX3r_Lke"
         alt="spring"/> <figcaption>
            <p>물론 이 콩이 아니다.</p>
        </figcaption>
</figure>

<h2 id="그럼-bean이-뭔데">그럼.. Bean이 뭔데?</h2>
<p>간단히 말하면 스프링프레임워크에서 사용하는 자바의 객체를 Bean이라 할 수 있다. 다만 Spring IoC Container(컨테이너)에서 관리되기 때문에
자바객체와 다르게 Bean(빈)이라 말한다. Xml이나 어노테이션을 이용해 메타데이터를 설정하면 컨테이너는 이를 확인해서 빈을 생성하고 해당 빈의
라이프 사이클을 관리하며 필요한 부분에 주입하여 의존성을 관리한다.</p>
<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1A9aOfWAN-6M0nBpsBJQThfWMylVVckTX"
         alt="spring"/> <figcaption>
            <p>이 콩도 아니다 이 콩도 아니다</p>
        </figcaption>
</figure>

<p>그럼 왜 굳이 Bean을 사용하는가?<br>
스프링에서 개발자는 의존성 주입과 객채의 생성과 소멸은 컨테이너가 해줄테니 개발에 집중할 수 해주는 것이 목적이다.</p>
<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1QxKmTIKypqEqZWO7tiy1Y0gq764by_3z"
         alt="spring"/> 
</figure>

<p>그럼 빈을 생성하는 예시를 보며 실제로 빈이 스프링상에서 어떻게 작용하는지 알아보자 (Spring Boot)<br>
빈을 만드는 방법은 여러가지가 있지만 대표적으로 쓰이는 방법을 예시들어 본다.</p>
<h2 id="빈-생성방법">빈 생성방법</h2>
<p>소스상에서 자바 오브젝트를 생성한 뒤 각 방법으로 등록을 할 수 있다.</p>
<ol>
<li>
<p><strong>XML로 지정</strong><br>
application.xml에 빈을 등록하거나 resource 폴더아래 XML파일을 생성 후 지정한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
<span style="color:#f92672">&lt;beans</span> <span style="color:#a6e22e">xmlns=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans&#34;</span>
       <span style="color:#a6e22e">xmlns:xsi=</span><span style="color:#e6db74">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
       <span style="color:#a6e22e">xsi:schemaLocation=</span><span style="color:#e6db74">&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&#34;</span><span style="color:#f92672">&gt;</span>
   
    <span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;xmlBeanTest&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;co.kr.jparangdev.spring_test1.model.XmlBeanTest&#34;</span> <span style="color:#f92672">/&gt;</span>
<span style="color:#f92672">&lt;/beans&gt;</span>
</code></pre></div><p>여러 XML을 만든 경우 설정에서 BeanFactory에서 직접 Context를 불러와 Bean을 넣어주거나, application.xml파일에 Import해서 사용하는 방법이 있다.
빈을 일일히 다 표기해야하며 Context관리가 어려워 불편한 점이 조금 있어보인다.</p>
</li>
<li>
<p><strong>Component-Scan + Annotation</strong><br>
application.xml 에서 Annotation으로 마킹된 객체를 빈으로 주입하는 방법이 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;context:component-scan</span> <span style="color:#a6e22e">base-package=</span><span style="color:#e6db74">&#34;co.kr.jparangdev.spring_test1&#34;</span><span style="color:#f92672">/&gt;</span>
</code></pre></div><p>이후 base-package 아래 지정된 객체중 @Component, @Service, @Controller, @Repository으로 마킹한 객체는 빈에 등록된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> co.kr.jparangdev.spring_test1.controller<span style="color:#f92672">;</span>
   
<span style="color:#f92672">import</span> org.springframework.stereotype.Controller<span style="color:#f92672">;</span>
   
<span style="color:#a6e22e">@Controller</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">BeanTestController</span> <span style="color:#f92672">{</span>
<span style="color:#f92672">}</span>
</code></pre></div></li>
<li>
<p><strong>@Configuration + @Bean</strong><br>
Spring boot의 경우 @Configuration을 지정한 객체 안에 @Bean으로 생성된 메소드를 생성해서 리턴해주면 빈을 주입 할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">    <span style="color:#f92672">package</span> co.kr.jparangdev.spring_test1.config<span style="color:#f92672">;</span>
       
    <span style="color:#f92672">import</span> co.kr.jparangdev.spring_test1.model.AnnotationBeanTest<span style="color:#f92672">;</span>
    <span style="color:#f92672">import</span> org.springframework.context.annotation.Bean<span style="color:#f92672">;</span>
    <span style="color:#f92672">import</span> org.springframework.context.annotation.Configuration<span style="color:#f92672">;</span>
       
    <span style="color:#a6e22e">@Configuration</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestConfig</span> <span style="color:#f92672">{</span>
        <span style="color:#a6e22e">@Bean</span>
        <span style="color:#66d9ef">public</span> AnnotationBeanTest <span style="color:#a6e22e">annotationBeanTest</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> AnnotationBeanTest<span style="color:#f92672">();</span>
        <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
</code></pre></div></li>
</ol>
<p>이제 이렇게 주입한 빈들이 제대로 들어갔는지 확인해보자</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@SpringBootApplication</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SpringTest1Application</span> <span style="color:#f92672">{</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        SpringApplication<span style="color:#f92672">.</span><span style="color:#a6e22e">run</span><span style="color:#f92672">(</span>SpringTest1Application<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">,</span> args<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>


    <span style="color:#a6e22e">@Bean</span> <span style="color:#75715e">// Annotation으로 등록한 bean 확인
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> CommandLineRunner <span style="color:#a6e22e">outBeanName</span><span style="color:#f92672">(</span>ApplicationContext ctx<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> args <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;============= Bean Start =============&#34;</span><span style="color:#f92672">);</span>
            String<span style="color:#f92672">[]</span> beanNames <span style="color:#f92672">=</span> ctx<span style="color:#f92672">.</span><span style="color:#a6e22e">getBeanDefinitionNames</span><span style="color:#f92672">();</span>
            Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">(</span>beanNames<span style="color:#f92672">).</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println
            <span style="color:#f92672">);</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;============= Bean End   =============&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Bean</span> <span style="color:#75715e">// xml로 등록한 bean 확인
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">public</span> CommandLineRunner <span style="color:#a6e22e">outXmlBeanName</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> args <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;============= XmlBean Start =============&#34;</span><span style="color:#f92672">);</span>
            ApplicationContext ctx <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassPathXmlApplicationContext<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;beans.xml&#34;</span><span style="color:#f92672">);</span>
            String<span style="color:#f92672">[]</span> beanNames <span style="color:#f92672">=</span> ctx<span style="color:#f92672">.</span><span style="color:#a6e22e">getBeanDefinitionNames</span><span style="color:#f92672">();</span>
            Arrays<span style="color:#f92672">.</span><span style="color:#a6e22e">stream</span><span style="color:#f92672">(</span>beanNames<span style="color:#f92672">).</span><span style="color:#a6e22e">forEach</span><span style="color:#f92672">(</span>
                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">::</span>println
            <span style="color:#f92672">);</span>
            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;============= XmlBean End   =============&#34;</span><span style="color:#f92672">);</span>
        <span style="color:#f92672">};</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>결과 화면으로 등록된 Bean의 Name들을 확인 할 수 있다. 
<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1Axx6JbPZgFPwBSomfmtIjsQbOclslu0u"
         alt="spring"/> <figcaption>
            <p>Test메소드도 Bean으로 등록되었다.</p>
        </figcaption>
</figure>
</p>
<p>이런 식으로 컨테이너에 등록된 빈들을 여러 방법으로 의존관계를 가지며 상호작용이 가능하다. 
그럼 의존관계는 어떻게 설정 할 수 있을까?</p>
<p>의존관계를 표기하는 방식은 여러가지가 있지만 대표적인 @Autowired 이용한 주입 표기 법이 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Service</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AutowiredTestService</span> <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@Autowired</span>
    AnnotationBeanTest annotationBeanTest<span style="color:#f92672">;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>다른 주입방법과 빈생성시 DI의 원리에 대해선 좀더 뒤에 알아 보도록 하겠다.<br>
또한 컨테이너에선 빈의 Scope를 관리하기도 한다.</p>
<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1lmHcVtsQU4tcNPDwUwxCUg2BVTK8jFGH"
         alt="bean scope"/> 
</figure>

<p>여기서 web spring에서 사용하는 것은 제외하고 singleton과 prototype만 좀더 자세히 알아보자</p>
<p><!-- raw HTML omitted -->Singleton Scope<!-- raw HTML omitted --><br>
스프링 컨테이너는 빈에 관하여 하나의 인스턴스만 관리하며 빈에 대한 요청에 하나의 인스턴스만 반환하게 된다. 컨테이너는 빈을 생성하며 캐시에 저장하여 해당 빈을 참조하는 경우 캐시된 인스턴스를 반환한다.
우리가 알고 있는 Singleton Disign Pattern 과는 조금 다르게 작용한다고 한다. 일반적인 싱글톤 패턴은 하나의 시스템 내부에서 하나의 클래스에 하나의 인스턴스만 존재하지만 빈의 싱글톤은 컨테이너내의 하나의 빈의 정의에 대해 하나의 인스턴스를 가지는 걸 말한다.
<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1EiFDxsYs_RNOPlt3AzFuuKn8F_rf5_cf"
         alt="singleton"/> <figcaption>
            <p>출처 : <a href="https://docs.spring.io/spring-framework/docs/5.3.5-SNAPSHOT/reference/html/core.html#beans-factory-scopes-singleton">https://docs.spring.io/spring-framework/docs/5.3.5-SNAPSHOT/reference/html/core.html#beans-factory-scopes-singleton</a></p>
        </figcaption>
</figure>
</p>
<p><!-- raw HTML omitted -->Prototype Scope<!-- raw HTML omitted --> <br>
프로토 타입은 싱글톤 패턴과 반대로 컨테이너는 모든 빈의 요청에 하나하나의 인스턴스를 만들어 준다.  일반적으로 상태값을 사용해야 하는 빈은 프로토타입을 사용하고 상태를 고려 안하는 경우는 싱글톤을 사용한다. 
<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1XUUTc_y2eKSc98nI19wa3W-xTxXfmiHN"
         alt="protoType"/> <figcaption>
            <p>출처 : <a href="https://docs.spring.io/spring-framework/docs/5.3.5-SNAPSHOT/reference/html/core.html#beans-factory-scopes-singleton">https://docs.spring.io/spring-framework/docs/5.3.5-SNAPSHOT/reference/html/core.html#beans-factory-scopes-singleton</a></p>
        </figcaption>
</figure>
</p>
<p>빈의 Scope를 지정하는 방법은 빈의 생성방법과 맞물려 있다.</p>
<ol>
<li>xml에 Scope속성을 추가해준다.</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;xmlBeanTest&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;co.kr.jparangdev.spring_test1.model.XmlBeanTest&#34;</span> <span style="color:#a6e22e">scope=</span><span style="color:#e6db74">&#34;singleton&#34;</span><span style="color:#f92672">/&gt;</span>
</code></pre></div><ol start="2">
<li>@Scope를 이용한다.</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Configuration</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestConfig</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Bean</span>
    <span style="color:#a6e22e">@Scope</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;protoType&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> AnnotationBeanTest <span style="color:#a6e22e">annotationBeanTest</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> AnnotationBeanTest<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>그럼 실제로 Singleton과 Prototype의 차이를 알아보자</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">scopeTestClass</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Autowired</span>
    AnnotationBeanTest anno1<span style="color:#f92672">;</span>
    <span style="color:#a6e22e">@Autowired</span>
    AnnotationBeanTest anno2<span style="color:#f92672">;</span>
    
    <span style="color:#a6e22e">@Test</span>
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">beanTest</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;first bean : &#34;</span><span style="color:#f92672">+</span>anno1<span style="color:#f92672">);</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;second bean : &#34;</span><span style="color:#f92672">+</span>anno2<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1x-1-B00LCp-cBwOTrdKQae4jJvrV8cwv"
         alt="singleton"/> <figcaption>
            <p>singleton</p>
        </figcaption>
</figure>

<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1z6qCXtUZxgoXX7YxU1O4BCs9OD38wCHr"
         alt="protoType"/> <figcaption>
            <p>protoType</p>
        </figcaption>
</figure>

<p>이렇게 오브젝트에 할당된 값이 바뀐걸 알 수 있다.</p>
<h2 id="bean-life-cycle-callback">Bean Life Cycle Callback</h2>
<p>기본적으로 빈의 라이프사이클은 컨테이너가 관리해주지만 스프링에서는 이를 개발자가 콜백함수를 통해 관여 할 수 있다. 콜백함수는 인터페이스로 이루어져 있어 이를 구현해주면 빈의 라이프 사이클 주기에서 내가 원하는 작용을 실행 시킬 수 있다.
그럼 스프링에서 기본적으로 제공하는 라이프사이클의 콜백 방법들을 알아보자</p>
<h3 id="1-생성단계">1. 생성단계</h3>
<p>먼저 생성단계에서 관여하는 콜백함수 지정방법은 3가지가 있다.</p>
<ol>
<li>@PostConstruct</li>
<li>InitializingBean 구현</li>
<li>@Bean(initMethod = &ldquo;init&rdquo;) 지정 (XML로도 지정가능)</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> co.kr.jparangdev.spring_test1.model<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.factory.InitializingBean<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> javax.annotation.PostConstruct<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AnnotationBeanTest</span> <span style="color:#66d9ef">implements</span> InitializingBean <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">;</span>

    <span style="color:#a6e22e">@PostConstruct</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">postContract</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Post Contract!&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">afterPropertiesSet</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;InitializingBean&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getName</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> name<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getValue</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setValue</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Configuration</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestConfig</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Bean</span><span style="color:#f92672">(</span>initMethod <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;init&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> AnnotationBeanTest <span style="color:#a6e22e">annotationBeanTest</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> AnnotationBeanTest<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1ZmNfukGenyghVL4knuX5Zh0AUeBEpwuw"
         alt="protoType"/> <figcaption>
            <p>메소드가 적용되는 순서도 알 수 있다.</p>
        </figcaption>
</figure>

<p>XML로는 이렇게 지정 할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;bean</span> <span style="color:#a6e22e">id=</span><span style="color:#e6db74">&#34;xmlBeanTest&#34;</span> <span style="color:#a6e22e">class=</span><span style="color:#e6db74">&#34;co.kr.jparangdev.spring_test1.model.XmlBeanTest&#34;</span> <span style="color:#a6e22e">init-method=</span><span style="color:#e6db74">&#34;init&#34;</span><span style="color:#f92672">/&gt;</span>
</code></pre></div><h3 id="2-소멸단계">2. 소멸단계</h3>
<p>소멸단계도 생성단계와 같이 3가지 방법을 제공한다.</p>
<ol>
<li>@PreDestroy</li>
<li>DisposableBean 구현</li>
<li>@Bean(destroyMethod=&ldquo;distroy&rdquo;) 지정 (XML로도 지정가능)</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> co.kr.jparangdev.spring_test1.model<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> org.springframework.beans.factory.DisposableBean<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> javax.annotation.PreDestroy<span style="color:#f92672">;</span>

<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AnnotationBeanTest</span> <span style="color:#66d9ef">implements</span>  DisposableBean <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> value<span style="color:#f92672">;</span>

    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">destroy</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;DisposableBean !!&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">distroy</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;distroy !!&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#a6e22e">@PreDestroy</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">PreDestroy</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;PreDestroy !!&#34;</span><span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> String <span style="color:#a6e22e">getName</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> name<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setName</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">getValue</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setValue</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> value<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> value<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> co.kr.jparangdev.spring_test1.config<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> co.kr.jparangdev.spring_test1.model.AnnotationBeanTest<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.annotation.Bean<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.springframework.context.annotation.Configuration<span style="color:#f92672">;</span>

<span style="color:#a6e22e">@Configuration</span>
<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TestConfig</span> <span style="color:#f92672">{</span>
    <span style="color:#a6e22e">@Bean</span><span style="color:#f92672">(</span>destroyMethod<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;distroy&#34;</span><span style="color:#f92672">)</span>
    <span style="color:#66d9ef">public</span> AnnotationBeanTest <span style="color:#a6e22e">annotationBeanTest</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> AnnotationBeanTest<span style="color:#f92672">();</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>빈 소멸과 동시에 프린트가 시작된다.
<figure>
    <img src="https://drive.google.com/uc?export=view&amp;id=1_hDpZGBwfcqOscKZg_cw4NGOa7IWgszq"
         alt="distroy bean"/> 
</figure>
</p>
<h3 id="결론">결론</h3>
<p>SpringFramwork를 이해하기 위해선 Bean자체의 이해도 필수적이라 생각된다. 스프링 컨테이너는 기동시 필요한 모든 싱글톤빈을 로드 한 후 지연없이 사용가능하도록 알아서해준다.<br>
이로인해 개발자는 비즈니스로직에 좀더 집중이 가능하도록 해준다. 스프링에는 여러가지 장점이 있으나 이러한 내가 사용하고자 하는 객체를 관리해주는 기능도도 굉장히 유용하다 생각된다.</p>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="tags/spring-framework/">spring-framework</a></span>
        <span class="tag"><a href="tags/spring-boot/">spring-boot</a></span>
        <span class="tag"><a href="tags/java/">java</a></span>
        
    </p>

      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-folder meta-icon"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>

        <span class="tag"><a href="categories/spring/">spring</a></span>
        
    </p>


      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        901 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2021-01-02 21:23
        

         
          
        
      </p>
    </div>

    
    <div class="pagination">
        <div class="pagination__title">
            <span class="pagination__title-h">Read other posts</span>
            <hr />
        </div>

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="/posts/kafka/about-kafka-1/">
                    <span class="button__icon">←</span>
                    <span class="button__text">Kafka 알아보기 - 1</span>
                </a>
            </span>
            

            
            <span class="button next">
                <a href="/posts/blog/hugo-2/">
                    <span class="button__text">github.io 블로그 만들기 - 2</span>
                    <span class="button__icon">→</span>
                </a>
            </span>
            
        </div>
    </div>


    

    

  </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2021</span>
            
            <span><a href="posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
          </div>
    </div>
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.af435e44374f1e99a669ea8cd5bb9a2fceed80588941a451bfddb66b86a67c9f40b0f417e9543a763f809aa7e9300d7b1d69bf99615810ba02ac70396d50fad5.js" integrity="sha512-r0NeRDdPHpmmaeqM1buaL87tgFiJQaRRv922a4amfJ9AsPQX6VQ6dj&#43;AmqfpMA17HWm/mWFYELoCrHA5bVD61Q=="></script>



    </body>
</html>
