<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kafka 알아보기 - 1 | Jparangdev'Blog</title><meta name=keywords content="kafka"><meta name=description content="Kafka 알아보기"><meta name=author content="jparangdev"><link rel=canonical href=https://japarangdev.github.io/posts/kafka/about-kafka-1/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.bc435bed1061be2618667408894ae8a5d27c970831ce57f287e42f911918fcbc.css integrity="sha256-vENb7RBhviYYZnQIiUropdJ8lwgxzlfyh+QvkRkY/Lw=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://japarangdev.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://japarangdev.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://japarangdev.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://japarangdev.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://japarangdev.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="Kafka 알아보기 - 1"><meta property="og:description" content="Kafka 알아보기"><meta property="og:type" content="article"><meta property="og:url" content="https://japarangdev.github.io/posts/kafka/about-kafka-1/"><meta property="og:image" content="https://japarangdev.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-01-15T21:43:00+09:00"><meta property="article:modified_time" content="2021-01-15T21:43:00+09:00"><meta property="og:site_name" content="Jparangdev's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://japarangdev.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Kafka 알아보기 - 1"><meta name=twitter:description content="Kafka 알아보기"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://japarangdev.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Kafka 알아보기 - 1","item":"https://japarangdev.github.io/posts/kafka/about-kafka-1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Kafka 알아보기 - 1","name":"Kafka 알아보기 - 1","description":"Kafka 알아보기","keywords":["kafka"],"articleBody":"1. What is Kafka ? \rhttps://www.confluent.io/blog/kafka-fastest-messaging-system\n\r\rApache Kafka is an evnet streaming platform\nKafka는 오픈소스 분산메세지 플랫폼이다. 실시간으로 대량의 스트림(메세지)를 처리하는데 적합한 Messaging Queue(MQ)의 일종 Kafka는 대용량의 메세지 처리가 필요한 링크드인에서 개발해 2011년 아파치의 공식 오픈소스로 공개되었다. 다른 분산 메세징 시스템에 비해 비교적 우수한 성능을 보여주어, 현재 많은 기업에서 사용중이라고 한다.\n2. Kafka Process \rKafka의 기본 구조\n\r\rKafka는 기본적으로 Publish/Subscribe 구조를 사용한다. Producer가 메세지를 발행(Publish)하면 Topic을 구독(Subscribe)하는 Consumer가 메세지를 소비하는 구조 거기에 Broker(Kafka)가 둘 사이를 중계하며 메세지를 효율적으로 전달하는 역할을 한다. 이렇게 각각 독립적으로 기능을 수행하며 서로 연결되어 있는 구성을 느슨한 결합(Loosely Coupled)이라 한다.\n다수의 Producer가 데이터를 메세지화 하여 전송하면 Kafka가 Event-Driven 방식으로 대량의 메세지를 병렬적으로 처리하며 해당 Topic을 구독하고있는 Consumer에게 전송하게 된다.\n3. Kafka Component \rKafka의 구성요소\n\r\rKafak의 기본적인 구성요소들을 하나씩 살펴보면\n  Topic 메세지의 종류 또는 카테고리이다. Producer가 특정 Topic으로 메세지를 생성하면, 이 Topic을 구독하고 있는 Consumer는 메세지를 소비한다.\n  Partition\nTopic 내에서 메세지가 분산되어 저장되는 Queue. 하나의 Topic에 단일 Partition인 경우 순서가 보장 될 수 있으나, 다중 Partition인 경우 각 Partition의 끝에서 Round-Robin 방식으로 쓰여지기 때문에 읽어 올 때 그 순서를 보장 할 수 없다. Topic내 Partition 수는 설정이 가능하며은 한번 늘리면 다시 줄일 수 없음.\n  Log\nPartition의 한 메세지 부분\n  Broker\nKafka의 서버를 의미한다. Broker 여러개가 Cluster를 구성하며, Zookeeper를 통해 메타데이터를 공유\n  Zookeeper\nKafka의 메타정보를 관리하는 프로그램 Zookeeper가 실행되어야 Kafka가 실행 될 수 있다.\n  4. Topic \u0026 Partition \r이미치 출처 : https://medium.com/@umanking/%EC%B9%B4%ED%94%84%EC%B9%B4%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0-%ED%95%98%EA%B8%B0%EC%A0%84%EC%97%90-%EB%A8%BC%EC%A0%80-data%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0%ED%95%B4%EB%B3%B4%EC%9E%90-d2e3ca2f3c2\n\r\rProducer와 Consumer는 하나의 Topic으로 메세지를 주고 받게 된다. Topic은 하나 이상의 Partition으로 이루어지게 되는데 이는 많은 메세지를 처리하기 위해 비동기적으로 작동한다. 다수의 Producer는 각각의 Partition에 순차적으로 데이터를 쌓게 되며 Consumer (ConsumerGroup)은 각각의 partition의 offset에 따라 데이터를 구독한다.\n\r이미치 출처 : https://engkimbs.tistory.com/691\n\r\r5. ConsumerGroup Consumer Group은 Consumer서버의 모임이라 할 수 있다. 각 ConsumerGroup은 하나의 Topic만 구독한다. Topic은 여러개의 Consumer Group과 연결되며 Consumer Group은 Consumer 끼리 Topic의 최종 offset을 공유하는 그룹이다. 하나의 Consumer가 이상이 생겼을 경우 나머지 Consumer가 동일하게 메세지를 소비한다.\nConsumer Group의 각 Consumer의 숫자에 따라 Partition에 접근하는 방법도 다르다. Consumer Group안의 Consumer수와 Partition 수가 같은 경우 1:1로 매칭되어 각 Partition의 데이터를 가져오지만 Consumer가 더 많은 경우 남은 Consumer는 Partition이 늘어날 때까지 대기하게 되며 Partition 숫자가 더 많아지는 경우는 Consumer가 여러개의 partition의 Message를 소비하게 된다.\n\r이미치 출처 : https://www.popit.kr/kafka-consumer-group\n\r\r하나의 서버가 장애가 생긴경우 ConsumerGroup 에 포함된 다른서버에서는 메세지를 동일 하게 소모 할 수 있다.\n\r참고\nhttps://kafka.apache.org/intro\nhttps://victorydntmd.tistory.com/344\nhttps://taetaetae.github.io/2017/11/02/what-is-kafka/\nhttps://epicdevs.com/17\nhttps://engkimbs.tistory.com/691\n","wordCount":"373","inLanguage":"en","datePublished":"2021-01-15T21:43:00+09:00","dateModified":"2021-01-15T21:43:00+09:00","author":{"@type":"Person","name":"jparangdev"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://japarangdev.github.io/posts/kafka/about-kafka-1/"},"publisher":{"@type":"Organization","name":"Jparangdev'Blog","logo":{"@type":"ImageObject","url":"https://japarangdev.github.io/%3Clink%20/%20abs%20url%3E"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://japarangdev.github.io/ accesskey=h title="Jparangdev :) (Alt + H)">Jparangdev :)</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://japarangdev.github.io/archives/ title=Post><span>Post</span></a></li><li><a href=https://japarangdev.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://japarangdev.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://japarangdev.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://japarangdev.github.io/posts/>Posts</a></div><h1 class=post-title>Kafka 알아보기 - 1</h1><div class=post-description>Kafka 알아보기</div><div class=post-meta>January 15, 2021&nbsp;·&nbsp;2 min&nbsp;·&nbsp;jparangdev</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#1-what-is-kafka- aria-label="1. What is Kafka ?">1. What is Kafka ?</a></li><li><a href=#2-kafka-process aria-label="2. Kafka Process">2. Kafka Process</a></li><li><a href=#3-kafka-component aria-label="3. Kafka Component">3. Kafka Component</a></li><li><a href=#4-topic--partition aria-label="4. Topic &amp;amp; Partition">4. Topic & Partition</a></li><li><a href=#5-consumergroup aria-label="5. ConsumerGroup">5. ConsumerGroup</a></li></ul></div></details></div><div class=post-content><h2 id=1-what-is-kafka->1. What is Kafka ?<a hidden class=anchor aria-hidden=true href=#1-what-is-kafka->#</a></h2><figure class=align-center><img loading=lazy src=/images/kafka/about-kafka-fastest.png#center alt="kafka process - 1"><figcaption><p><a href=https://www.confluent.io/blog/kafka-fastest-messaging-system>https://www.confluent.io/blog/kafka-fastest-messaging-system</a></p></figcaption></figure><p><strong>Apache Kafka is an evnet streaming platform</strong></p><p>Kafka는 오픈소스 분산메세지 플랫폼이다.
실시간으로 대량의 스트림(메세지)를 처리하는데 적합한 Messaging Queue(MQ)의 일종
Kafka는 대용량의 메세지 처리가 필요한 링크드인에서 개발해 2011년 아파치의 공식 오픈소스로 공개되었다.
다른 분산 메세징 시스템에 비해 비교적 우수한 성능을 보여주어, 현재 많은 기업에서 사용중이라고 한다.</p><h2 id=2-kafka-process>2. Kafka Process<a hidden class=anchor aria-hidden=true href=#2-kafka-process>#</a></h2><figure class=align-center><img loading=lazy src=/images/kafka/about-kafka-process.png#center alt="kafka process - 1"><figcaption><p>Kafka의 기본 구조</p></figcaption></figure><p>Kafka는 기본적으로 Publish/Subscribe 구조를 사용한다.
Producer가 메세지를 발행(Publish)하면 Topic을 구독(Subscribe)하는 Consumer가 메세지를 소비하는 구조
거기에 Broker(Kafka)가 둘 사이를 중계하며 메세지를 효율적으로 전달하는 역할을 한다.
이렇게 각각 독립적으로 기능을 수행하며 서로 연결되어 있는 구성을 느슨한 결합(Loosely Coupled)이라 한다.</p><p>다수의 Producer가 데이터를 메세지화 하여 전송하면 Kafka가 <a href=/posts/programming/event-driven/>Event-Driven</a> 방식으로 대량의 메세지를 병렬적으로 처리하며 해당 Topic을 구독하고있는 Consumer에게 전송하게 된다.</p><h2 id=3-kafka-component>3. Kafka Component<a hidden class=anchor aria-hidden=true href=#3-kafka-component>#</a></h2><figure class=align-center><img loading=lazy src=/images/kafka/about-kafka-component.png#center alt="kafka Component - 1"><figcaption><p><em>Kafka의 구성요소</em></p></figcaption></figure><p>Kafak의 기본적인 구성요소들을 하나씩 살펴보면</p><ul><li><p><strong>Topic</strong>
메세지의 종류 또는 카테고리이다. Producer가 특정 Topic으로 메세지를 생성하면, 이 Topic을 구독하고 있는 Consumer는 메세지를 소비한다.</p></li><li><p><strong>Partition</strong><br>Topic 내에서 메세지가 분산되어 저장되는 Queue. 하나의 Topic에 단일 Partition인 경우 순서가 보장 될 수 있으나, 다중 Partition인 경우 각 Partition의 끝에서 Round-Robin 방식으로 쓰여지기 때문에 읽어 올 때 그 순서를 보장 할 수 없다. Topic내 Partition 수는 설정이 가능하며은 한번 늘리면 다시 줄일 수 없음.</p></li><li><p><strong>Log</strong><br>Partition의 한 메세지 부분</p></li><li><p><strong>Broker</strong><br>Kafka의 서버를 의미한다. Broker 여러개가 Cluster를 구성하며, Zookeeper를 통해 메타데이터를 공유</p></li><li><p><strong>Zookeeper</strong><br>Kafka의 메타정보를 관리하는 프로그램 Zookeeper가 실행되어야 Kafka가 실행 될 수 있다.</p></li></ul><h2 id=4-topic--partition>4. Topic & Partition<a hidden class=anchor aria-hidden=true href=#4-topic--partition>#</a></h2><figure class=align-center><img loading=lazy src=/images/kafka/about-kafka-partition.png#center alt="kafka partiton"><figcaption><p><em>이미치 출처 : <a href=https://medium.com/@umanking/%EC%B9%B4%ED%94%84%EC%B9%B4%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0-%ED%95%98%EA%B8%B0%EC%A0%84%EC%97%90-%EB%A8%BC%EC%A0%80-data%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0%ED%95%B4%EB%B3%B4%EC%9E%90-d2e3ca2f3c2>https://medium.com/@umanking/%EC%B9%B4%ED%94%84%EC%B9%B4%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0-%ED%95%98%EA%B8%B0%EC%A0%84%EC%97%90-%EB%A8%BC%EC%A0%80-data%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C-%EC%9D%B4%EC%95%BC%EA%B8%B0%ED%95%B4%EB%B3%B4%EC%9E%90-d2e3ca2f3c2</a></em></p></figcaption></figure><p>Producer와 Consumer는 하나의 Topic으로 메세지를 주고 받게 된다.
Topic은 하나 이상의 Partition으로 이루어지게 되는데 이는 많은 메세지를 처리하기 위해 비동기적으로 작동한다.
다수의 Producer는 각각의 Partition에 순차적으로 데이터를 쌓게 되며 Consumer (ConsumerGroup)은 각각의 partition의 offset에 따라 데이터를 구독한다.</p><figure class=align-center><img loading=lazy src=/images/kafka/about-kafka-partition-2.png#center alt="kafka partiton-2"><figcaption><p><em>이미치 출처 : <a href=https://engkimbs.tistory.com/691>https://engkimbs.tistory.com/691</a></em></p></figcaption></figure><h2 id=5-consumergroup>5. ConsumerGroup<a hidden class=anchor aria-hidden=true href=#5-consumergroup>#</a></h2><p>Consumer Group은 Consumer서버의 모임이라 할 수 있다.
각 ConsumerGroup은 하나의 Topic만 구독한다.
Topic은 여러개의 Consumer Group과 연결되며 Consumer Group은 Consumer 끼리 Topic의 최종 offset을 공유하는 그룹이다.
하나의 Consumer가 이상이 생겼을 경우 나머지 Consumer가 동일하게 메세지를 소비한다.</p><p>Consumer Group의 각 Consumer의 숫자에 따라 Partition에 접근하는 방법도 다르다.
Consumer Group안의 Consumer수와 Partition 수가 같은 경우 1:1로 매칭되어 각 Partition의 데이터를 가져오지만
Consumer가 더 많은 경우 남은 Consumer는 Partition이 늘어날 때까지 대기하게 되며 Partition 숫자가 더 많아지는 경우는 Consumer가 여러개의 partition의 Message를 소비하게 된다.</p><figure class=align-center><img loading=lazy src=/images/kafka/kafak-counsumer-group.png#center alt="kafka consumer group"><figcaption><p><em>이미치 출처 : <a href=https://www.popit.kr/kafka-consumer-group>https://www.popit.kr/kafka-consumer-group</a></em></p></figcaption></figure><p>하나의 서버가 장애가 생긴경우 ConsumerGroup 에 포함된 다른서버에서는 메세지를 동일 하게 소모 할 수 있다.</p><figure class=align-center><img loading=lazy src=/images/kafka/kafak-counsumer-group-2.png#center alt="kafka consumer group - 2"></figure><p>참고<br><a href=https://kafka.apache.org/intro>https://kafka.apache.org/intro</a><br><a href=https://victorydntmd.tistory.com/344>https://victorydntmd.tistory.com/344</a><br><a href=https://taetaetae.github.io/2017/11/02/what-is-kafka/>https://taetaetae.github.io/2017/11/02/what-is-kafka/</a><br><a href=https://epicdevs.com/17>https://epicdevs.com/17</a><br><a href=https://engkimbs.tistory.com/691>https://engkimbs.tistory.com/691</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://japarangdev.github.io/tags/kafka/>kafka</a></li></ul><nav class=paginav><a class=prev href=https://japarangdev.github.io/posts/spring/bean/><span class=title>« Prev Page</span><br><span>콩(Bean) 이야기</span></a>
<a class=next href=https://japarangdev.github.io/posts/kafka/about-kafka-2/><span class=title>Next Page »</span><br><span>Kafka 알아보기 - 2</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://japarangdev.github.io/>Jparangdev'Blog</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script></body></html>